<apex:page id="detailPage" tabStyle="advpm__ActionPlan__c" standardController="advpm__ActionPlan__c" extensions="advpm.ActionPlanDetailController" applyHtmlTag="false" applyBodyTag="false" sidebar="false" showHeader="false" standardStyleSheets="true"  >
<html xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
	<head>
		<title>
			<apex:outputPanel layout="none" >{!$Label.advpm__ap_action_plan}</apex:outputPanel>
			<apex:outputPanel layout="none" >{!actionPlan.Name}</apex:outputPanel>
  		</title>
  		<meta name="viewport" content="user-scalable=no,width=device-width,initial-scale=1.0,maximum-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
		<apex:includeScript value="{!$Resource.advpm__ActionPlan_Utilities}" />
	    <apex:includeScript value="{!$Resource.advpm__ActionPlans_sortable}" />
		<apex:includeScript value="{!$Resource.advpm__ActionPlan_ActionPlanDetailScripts}" />  
	    <apex:stylesheet value="{!$Resource.advpm__ActionPlan_ActionPlanDetailStyles}" />
	    	<c:includeSLDS sldsV2="true" /><!-- value="{!URLFOR($Resource.SLDS0112, 'assets/styles/salesforce-lightning-design-system-vf.css')}" -->
		  	<style type="text/css">
				.slds .slds-modal--large .slds-modal__container{width:90%;max-width:960px;min-width:640px;}
				.slds #editModal .slds-pill{display:block;}
				.slds #editModal .slds-pill:hover{background-color:#fff;}
				.slds #editModal .slds-pill__label{max-width:15.5rem;}
				.slds, .slds h1,.slds h2,.slds h3,.slds h4,.slds h5,.slds h6 {font-family:"Salesforce Sans", Arial, sans-serif;}
				.slds .slds-form-element__static,.sfdc_richtext{font-family:"Salesforce Sans", Arial, sans-serif;font-size:.875rem;color:#16325C;line-height:normal;font-weight:400;}
				.slds .sfdc_richtext ul{margin:1em;margin-left:40px;list-style-type:disc;}
				.modal-icon-close {width: 2rem;height: 2rem;fill: white;}
				.slds-modal__close {right: -.8rem;}
				.frm-sec-header {color: rgb(22, 50, 92);font-size: 1rem;line-height: 1;margin: 0;padding: 1rem 0.8rem 0.75rem;}
				.lookupIcon, .lookupIconOn {display: inline-block !important;width: 1rem!important;height: 1rem!important;line-height: 1rem!important;vertical-align: middle !important;background-image: url("{!URLFOR($Resource.SLDS0202, 'assets/icons/utility/search_60.png')}") !important;background-repeat: no-repeat !important;margin-left: -1.5rem!important;background-size: 1rem!important;}
		        .lookupInput input {padding-right:1.5rem!important;}
		        .dateOnlyInput input {width:100%;}
		        .dateFormat {display:none;}
				.date-picker-icon {position: absolute;vertical-align: middle;right: 20px;top: 30px;width: 15px;height: 15px;background:url("{!URLFOR($Resource.SLDS0202, 'assets/icons/utility/monthlyview_60.png')}") no-repeat 0 0;background-size: 15px;}
				.datePicker, .autoCompleteBox, .autoCompleteBoxScrolling {z-index:999999;}
				.slds .slds-modal--large .slds-modal__container{width:90%;max-width:960px;min-width:640px;}
				.slds #editModal .slds-pill{display:block;}
				.slds #editModal .slds-pill:hover{background-color:#fff;}
				.slds #editModal .slds-pill__label{max-width:15.5rem;}
				.slds, .slds h1,.slds h2,.slds h3,.slds h4,.slds h5,.slds h6 {font-family:"Salesforce Sans", Arial, sans-serif;}
				.slds .slds-form-element__static {line-height: 1.75;}
				.slds .slds-form-element__static,.sfdc_richtext{font-family:"Salesforce Sans", Arial, sans-serif;font-size:.875rem;color:#16325C;line-height:normal;font-weight:400;}
				.slds .sfdc_richtext ul{margin:1em;margin-left:40px;list-style-type:disc;}
				.modal-icon-close {width: 2rem;height: 2rem;fill: white;}
				.slds-modal__close {right: -.8rem;}
				.slds-button{font-size: 0.80rem;}
				.slds-col--padded {
		    		 padding-right: 0px;
		   	 		 padding-left: 0px; 
				}
				.frm-sec-header {color: rgb(22, 50, 92);font-size: 1rem;line-height: 1;margin: 0;padding: 1rem 0.8rem 0.75rem;}
				.lookupIcon, .lookupIconOn {display: inline-block !important;width: 1rem!important;height: 1rem!important;line-height: 1rem!important;vertical-align: middle !important;background-image: url("{!URLFOR($Resource.SLDS0202, 'assets/icons/utility/search_60.png')}") !important;background-repeat: no-repeat !important;margin-left: -1.5rem!important;background-size: 1rem!important;}
		        .lookupInput input {padding-right:1.5rem!important;}
		        .dateOnlyInput input {width:100%;}
		        .dateFormat {display:none;}
				.date-picker-icon {position: absolute;vertical-align: middle;right: 20px;top: 30px;width: 15px;height: 15px;background:url("{!URLFOR($Resource.SLDS0202, 'assets/icons/utility/monthlyview_60.png')}") no-repeat 0 0;background-size: 15px;}
				.datePicker, .autoCompleteBox, .autoCompleteBoxScrolling {z-index:999999;}
				 input[type=checkbox]{clear: both;display: block;}
				.uiInput--checkbox input[type=checkbox]:checked, input.uiInput--checkbox[type=checkbox]:checked {border-color: rgb(21, 137, 238);box-shadow: 0 0 3px #0070d2;}
				.uiInput--checkbox input[type=checkbox]:checked, input.uiInput--checkbox[type=checkbox]:checked {background-color: rgb(21, 137, 238);background-image: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCI+PHBhdGggZmlsbD0iI2ZmZiIgZD0ibTQyLjYgNzFjLTEuMiAwLTIuNC0wLjUtMy4zLTEuNGwtMTguNy0xOC43Yy0wLjgtMC44LTAuOC0yIDAtMi44bDMuNy0zLjdjMC44LTAuOCAyLTAuOCAyLjggMGwxNS41IDE1LjQgMzAuMy0zMC4zYzAuOC0wLjggMi0wLjggMi44IDBsMy43IDMuN2MwLjggMC44IDAuOCAyIDAgMi44bC0zMy42IDMzLjZjLTAuOSAwLjktMiAxLjQtMy4yIDEuNHoiPjwvcGF0aD48L3N2Zz4=");background-size: cover;border-color: rgb(21, 137, 238);}
				.uiInput--checkbox input, input.uiInput--checkbox {display: block;-webkit-appearance: none;-moz-appearance: none;appearance: none;width: 1rem;height: 1rem;vertical-align: -.25em;border: 1px solid rgb(216, 221, 230);border-radius: .125rem;background: rgb(255, 255, 255);-webkit-transition: .5s ease all;transition: .5s ease all;}
				.staff-input select {width: 20%;}
				.staff-input input {width: 80%;}
				.slds-table--bordered {border-top: none;}
				select:-internal-list-box optgroup option::before {content: ""!important;}
                body button {font-weight: normal;}
                .slds ul li, .slds ol li {margin-left: 0px!important;}
                .slds-button-group .slds-button + .slds-button, .slds-button-group .slds-button + .slds-button--last .slds-button {margin-left: -2px;}
                .slds-dropdown__item > a {color: #0070d2;}
                .slds .slds-form-element__static a, a.slds-changeLink {color: #16325C;}
                .bPageBlock .detailList .data2Col {padding-left: 0px;}
                .slds-checkbox [type="checkbox"][disabled] + .slds-checkbox--faux:after, .slds-checkbox [type="checkbox"][disabled] ~ .slds-checkbox--faux:after {border-color: #a8b7c7;}
                .sortable th {border-bottom: 1px solid #ccc !important;}
                .slds .slds-table .slds-cell-wrap {font-family: "Salesforce Sans", Arial, sans-serif;color: #16325C;}
                .slds .slds-table tr > th:first-child, .slds .slds-table tr > td:first-child {padding-left: 12px;}
                .slds .slds-panel .slds-form--stacked .slds-panel__section {padding-left: 24px;}
                .slds-form--stacked .slds-form-element {margin-top: 0.5rem;}
			</style>
			<style type="text/css">
		   		.detailList .helpOrb {position:relative;right: 0px;}
				.bPageBlock .detailList tr td{border-bottom: 0px solid #e3deb8;}
				.sortable th div {float: left;}
				.sortable th {vertical-align: bottom !important;}
				.hideD {display:none}
		   	</style>
	    	<style type="text/css">
		   		.detailList .helpOrb {position:relative;right: 0px}
				.sortable th.actTypeCol			{	width:6%;	}
				.sortable th.subjectCol			{	width:13%;	}
				.sortable th.dependencyColumn	{	width:13%;	}
				/**
				.sortable th.daysCol			{	width:7%;	}
				.sortable th.startTimeCol		{	width:6%;	}
				.sortable th.durationCol		{	width:8%;	}
				.sortable th.assigned_to_field	{	width:13%;	}
				.sortable th.typeCol			{	width:5%;	}
				.sortable th.priorityCol 		{ 	width:5%;	}
				.sortable th.statusCol			{	width:7%;	}
				.sortable th.sendMailCol 		{ 	width:5%;	}
				.sortable th.reminderCol 		{ 	width:6%;	}
				.sortable th.commentsCol 		{ 	width:6%;	}
				**/
				.sortable th.daysCol			{	width:auto !important;	}
				.sortable th.startTimeCol		{	width:auto !important;	}
				.sortable th.durationCol		{	width:auto !important;	}
				.sortable th.assigned_to_field	{	width:auto !important;	}
				.sortable th.typeCol			{	width:auto !important;	}
				.sortable th.priorityCol 		{ 	width:auto !important;	}
				.sortable th.statusCol			{	width:auto !important;	}
				.sortable th.sendMailCol 		{ 	width:auto !important;	}
				.sortable th.reminderCol 		{ 	width:auto !important;	}
				.sortable th.commentsCol 		{ 	width:auto !important;	}
				.sortable th.dateCol			{	width:auto !important;	}
				.sortable th {vertical-align: bottom !important;}
				.bPageBlock .detailList tr td{border-bottom: 0px solid #e3deb8;}
		   	</style>
		   	<script type="text/javascript">
				function editAP() {
					var ur = '{!$Site.Prefix}/apex/advpm__ActionPlanCreationSLDS?id={!actionPlan.Id}&sl=1';
                    if ( (typeof sforce != 'undefined') && (sforce != null) ) {
                        sforce.one.navigateToURL(ur, true);
                    }
				}
				function deleteAP() {
					if (confirm('{!$Label.ap_AreYouSureAsk}')) {
						//doDelete();
                        var ur = '{!$Site.Prefix}/apex/advpm__ActionPlanDelete?id={!actionPlan.Id}&retURL={!actionPlan.Id}';
                        if ( (typeof sforce != 'undefined') && (sforce != null) ) {
                            sforce.one.navigateToURL(ur, true);
                        }
					}
				}
			</script>
	</head>
	<body class="slds">
		<apex:form id="apForm">
			<apex:actionFunction name="doDelete" action="{!delete}" />
			<apex:actionFunction name="doEdit" action="{!edit}" />
			
            <apex:pageBlock id="detailBlock" mode="maindetail" >
			<c:slds_pageheader pageHeaderType="RECORD"
                                headerTitle="{!$Label.advpm__ap_action_plan}" 
                                headerSubTitle="{!actionPlan.Name}"
                                headerIconCSS="slds-icon-custom-11"
                                headerIconPath="{!URLFOR($Resource.advpm__SLDS0112, 'assets/icons/custom-sprite/svg/symbols.svg#custom11')}">
                <div class="slds-button-group" role="group">
                    <button class="slds-button slds-button--neutral" id="edit" onclick="editAP(); return false;">{!$Label.advpm__ap_edit}</button>
                    <button class="slds-button slds-button--neutral slds-button--last" id="delete" onclick="deleteAP(); return false;">{!$Label.advpm__ap_delete}</button>
                </div>
            </c:slds_pageheader>
            
			<!-- INFORMATION SECTION -->
            <div class="slds-panel slds-grid slds-grid--vertical slds-nowrap">
                <div class="slds-form--stacked">
                    <div class="slds-panel__section">
                        <h3 class="slds-text-heading--small slds-m-bottom--medium">{!$Label.ap_Information}</h3>
                        
                        <div class="slds-grid slds-has-divider--bottom">
                            <div class="slds-size--1-of-3">
                                <div class="slds-form-element slds-hint-parent">
                                    <span class="slds-form-element__label">{!$Label.advpm__ap_action_plan} {!$Label.ap_Name}</span>
                                    <div class="slds-form-element__control">
                                        <span class="slds-form-element__static"><apex:outputText value="{!actionPlan.Name}" /></span>
                                    </div>
                                </div>
                            </div>
                            <div class="slds-size--1-of-3">
                                <div class="slds-form-element slds-hint-parent">
                                    <span class="slds-form-element__label"><apex:outputText value="{!$Label.advpm__ap_planstartdate}" /></span>
                                    <div class="slds-form-element__control">
                                        <span class="slds-form-element__static"><apex:outputField value="{!actionPlan.advpm__StartDate__c}" /></span>
                                    </div>
                                </div>
                            </div>
                            <div class="slds-size--1-of-3">
                                <div class="slds-form-element slds-hint-parent">
                                    <span class="slds-form-element__label">{!$Label.advpm__ap_action_plan_template}</span>
                                    <div class="slds-form-element__control">
                                        <span class="slds-form-element__static">
                                            <apex:outputText rendered="{!(ActionPlan.advpm__Action_Plan_Template__c != null)}">
                                                <apex:outputLink value="{!$Site.Prefix}/apex/advpm__ActionPlanTemplateDetailSLDS?Id={!ActionPlan.advpm__Action_Plan_Template__c}">{!ActionPlan.Action_Plan_Template__r.Name}</apex:outputLink>
                                            </apex:outputText>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="slds-grid slds-has-divider--bottom">
                            <div class="slds-size--1-of-3">
                                <div class="slds-form-element slds-hint-parent">
                                    <span class="slds-form-element__label"><apex:outputText value="{!$Label.advpm__ap_related_to}" /></span>
                                    <div class="slds-form-element__control">
                                        <span class="slds-form-element__static">
                                            <apex:outputText >
                                                <apex:outputField value="{!actionPlan.advpm__Account__c}"      rendered="{!(actionPlan.advpm__Account__c != null)}" />
                                                <apex:outputField value="{!actionPlan.advpm__Contact__c}"      rendered="{!(actionPlan.advpm__Contact__c != null)}" />
                                                <apex:outputField value="{!actionPlan.advpm__Matter__c}"       rendered="{!(actionPlan.advpm__Matter__c != null)}" />
                                            </apex:outputText>
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div class="slds-size--1-of-3">
                                <div class="slds-form-element slds-hint-parent" style="margin-top:0.45rem;">
                                    <label class="slds-checkbox slds-form-element__label">
                                        <apex:inputCheckbox value="{!ActionPlan.advpm__SkipWeekends__c}"  disabled="true" id="skipWeekendCheckbox" style="margin:0px;{!IF(isLightning,'margin-top:3px;','')}"/>
                                        <span class="slds-checkbox--faux"></span>
                                        <apex:outputLabel styleclass="slds-form-element__label" value="{!$Label.advpm__ap_skipweekendswhen}" for="skipWeekendCheckbox" />
                                    </label>
                                    <div class="slds-form-element__control">
                                        <span class="slds-form-element__static">
                                            <apex:outputPanel id="skipDayTable" layout="block" styleClass="slds-form-element" rendered="{!(actionPlan.advpm__SkipDay__c != null && actionPlan.advpm__SkipWeekends__c == true)}">
                                                <span class="slds-form-element__label">{!$Label.ap_DefaultWeekendDueDates}&nbsp;<strong>{!actionPlan.SkipDay__c}</strong></span>
                                            </apex:outputPanel>
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div class="slds-size--1-of-3">
                                <div class="slds-form-element slds-hint-parent">
                                    <span class="slds-form-element__label"><apex:outputText value="{!$Label.advpm__ap_status}" /></span>
                                    <div class="slds-form-element__control">
                                        <span class="slds-form-element__static"><apex:outputText >{!Completed} {!$Label.advpm__ap_of} {!TaskSize} {!$Label.advpm__ap_taskscomplete}</apex:outputText></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>
			<!-- INFORMATION SECTION -->
            
			<!-- TASKS SECTION -->
			<div class="slds-panel slds-grid slds-grid--vertical slds-nowrap">
			  <div class="slds-form--stacked">
			    <div class="slds-panel__section">
			      <apex:pageBlockSection id="taskSection" columns="1">
	                <apex:dataTable value="{!wrappedTasks}" var="ap" id="theTable" styleClass="slds-table slds-table--bordered sortable" headerClass="slds-theme--shade">
	                	<apex:column id="columnOne" headerClass="actTypeCol slds-text-heading--label slds-truncate" styleClass="slds-cell-wrap" headerValue="{!$ObjectType.advpm__APTaskTemplate__c.fields.advpm__Activity_Type__c.label}">
                    		<apex:outputText id="activity_type">{!ap.task.advpm__Activity_Type__c}</apex:outputText>
	                    </apex:column>
	                    <apex:column headerValue="{!$ObjectType.advpm__APTaskTemplate__c.fields.advpm__Subject__c.label}" headerClass="subjectCol slds-text-heading--label slds-truncate" styleClass="slds-cell-wrap">
	                    	<apex:outputLink rendered="{!ap.linkedRecId != ''}" value="/{!ap.linkedRecId}">{!ap.task.advpm__Subject__c}</apex:outputLink>
	                    	<apex:outputPanel rendered="{!ap.linkedRecId == ''}">{!ap.task.advpm__Subject__c}</apex:outputPanel>
	                    </apex:column>
	                    <apex:column id="dependency" headerClass="dependencyColumn slds-text-heading--label slds-truncate" styleClass="slds-cell-wrap" headerValue="{!$ObjectType.advpm__APTaskTemplate__c.fields.advpm__APTaskTemplate__c.label}">
	                    	<apex:outputText >{!ap.task.APTaskTemplate__r.advpm__Subject__c}</apex:outputText>
	                    </apex:column>
	                    <apex:column value="{!ap.task.advpm__DaysFromStart__c}" headerClass="daysCol slds-text-heading--label slds-truncate" styleClass="slds-cell-wrap">
							<apex:facet name="header">
								<div>Days Before<br/>or After<!-- <img class="helpOrb" title="{!$Label.ap_days_after_msg}" src="/s.gif"/> --></div>
							</apex:facet>
	                   	</apex:column>
	                    <apex:column headerClass="dateCol slds-text-heading--label slds-truncate" styleClass="slds-cell-wrap" headerValue="{!$ObjectType.advpm__APTaskTemplate__c.fields.advpm__ActivityDate__c.label}">
	                        <span style="color:#cc0000"><apex:outputField value="{!ap.task.advpm__ActivityDate__c}" rendered="{!IF( (!ISNULL(ap.task.advpm__ActivityDate__c) && ap.task.advpm__ActivityDate__c < TODAY()) && ap.task.advpm__Status__c != 'Completed' && ap.task.advpm__Activity_Type__c == 'Task', true, false)}" /></span>
	                        <apex:outputField value="{!ap.task.advpm__ActivityDate__c}" rendered="{!IF((!ISNULL(ap.task.advpm__ActivityDate__c) && ap.task.advpm__ActivityDate__c >= TODAY()) || ap.task.advpm__Status__c == 'Completed' || ap.task.advpm__Activity_Type__c == 'Event', true, false)}" />
	                    </apex:column>
	                    <apex:column styleClass="Start_Time_Display_field slds-cell-wrap" headerClass="startTimeCol slds-text-heading--label slds-truncate">
	                    	<apex:facet name="header">Start<br/>Time</apex:facet>
	                    	<apex:outputField value="{!ap.task.advpm__Start_Time_Display__c}"  rendered="{!ap.task.advpm__Activity_Type__c == 'Event'}" />
	                    </apex:column>
	                    <apex:column styleClass="DurationInMinutes_field slds-cell-wrap" headerClass="durationCol slds-text-heading--label slds-truncate">
	                    	<apex:facet name="header"><div>Duration<br/>(in minutes)</div></apex:facet>
	                    	<apex:outputPanel rendered="{!ap.task.advpm__Activity_Type__c == 'Event'}">
	                    		<apex:outputField value="{!ap.task.advpm__DurationInMinutes__c}"  />
	                    	</apex:outputPanel>
	                    </apex:column>
	                    <apex:column headerValue="{!$ObjectType.advpm__APTaskTemplate__c.fields.advpm__User__c.label}" styleClass="assigned_to_field slds-cell-wrap" headerClass=" slds-text-heading--label slds-truncate">
	                    	<apex:outputField rendered="{!ap.task.advpm__User_Type__c != 'SourceUserFields'}" value="{!ap.task.advpm__User__c}"  /> 
	                    	<apex:outputPanel rendered="{!ap.task.advpm__User_Type__c == 'SourceUserFields'}">[<strong>{!map_objFields[ap.task.advpm__User_Source_Field__c]}</strong>]</apex:outputPanel>
	                    </apex:column>
	                    <apex:column headerValue="{!$ObjectType.advpm__APTaskTemplate__c.fields.advpm__Type__c.label}" styleClass="type_field slds-cell-wrap" headerClass="typeCol slds-text-heading--label slds-truncate">
	                    	<apex:outputField value="{!ap.task.advpm__Type__c}" />
	                    </apex:column>
	                    <apex:column headerValue="{!$ObjectType.advpm__APTaskTemplate__c.fields.advpm__Priority__c.label}" styleClass="Priority_field slds-cell-wrap" headerClass="priorityCol slds-text-heading--label slds-truncate">
	                    	<apex:outputField value="{!ap.task.advpm__Priority__c}" rendered="{!ap.task.advpm__Activity_Type__c == 'Task'}" />
	                    </apex:column>
	                    <apex:column headerValue="{!$ObjectType.advpm__APTaskTemplate__c.fields.advpm__Status__c.label}" headerClass="statusCol slds-text-heading--label slds-truncate" styleClass="slds-cell-wrap">
	                    	<apex:outputField value="{!ap.task.advpm__Status__c}" rendered="{!ap.task.advpm__Activity_Type__c == 'Task'}" />
	                    </apex:column>
	                    <apex:column headerValue="{!$ObjectType.advpm__APTaskTemplate__c.fields.advpm__Reminder__c.label}" headerClass="reminderCol slds-text-heading--label slds-truncate" styleClass="slds-cell-wrap">
	                    	<div class="">
		  						<div class="slds-form-element__control">
				  					<label class="slds-checkbox">
										<apex:inputCheckbox value="{!ap.task.advpm__Reminder__c}"  disabled="true"  style="margin: 0px;"/>
				   						<span class="slds-checkbox--faux"></span>
				      				</label>
				      			</div>
					  		</div>
	                    	<apex:outputField value="{!ap.task.advpm__Time_Reminder__c}" />
	                    </apex:column>
	                    <apex:column headerValue="{!$ObjectType.advpm__APTaskTemplate__c.fields.advpm__Comments__c.label}" headerClass="commentsCol slds-text-heading--label slds-truncate" styleClass="slds-cell-wrap">
	                    	
	                    	<apex:outputPanel id="commentPanel" style="display:none" >
	                       		<div id="commentContainer" onmouseout="javascript:ActionPlanDetailScripts.hideComments('{!$Component.theTable.columnOne}');">
	                        		<div class="hd">
	                        			<div class="hd-left">{!$Label.ap_Comments}</div>
	                        			<div class="hd-right"></div>
	                        		</div>
	                        		<div class="bd">
	                        			<textarea readonly="true" id="Comments">{!ap.task.Comments__c}</textarea>
	                        		</div>
	                       		</div>
	                       	</apex:outputPanel>
	                       	
							<apex:outputPanel rendered="{!ap.task.advpm__Comments__c != null}">(<a onmouseover="javascript:ActionPlanDetailScripts.showComments('{!$Component.theTable.columnOne}');" style="text-decoration:underline">...</a>)</apex:outputPanel>
	                    </apex:column>
	                </apex:dataTable>
			      </apex:pageBlockSection>
		       </div>
		      </div>
		    </div>
			<!-- END TASKS SECTION -->
            
			<!-- GANTT VIEW SECTION -->
            <div class="slds-panel slds-grid slds-grid--vertical slds-nowrap">
                <div class="slds-form--stacked">
                    <div class="slds-panel__section">
                        <h3 class="slds-text-heading--small slds-m-bottom--medium">Gantt View</h3>
                        <apex:pageBlockSection columns="1">
                        	<iframe id="frame-gantt-ap" frameborder="0" scrolling="no" title="Action Plan Activities" width="100%" src="{!$Site.Prefix}/apex/advpm__ActionPlanGantt?id={!ActionPlan__c.Id}"></iframe>
                        	<script type="text/javascript">
                                function AdjustIframeHeightOnLoad() { document.getElementById("frame-gantt-ap").style.height = document.getElementById("frame-gantt-ap").contentWindow.document.body.scrollHeight + "px"; }
                                function AdjustIframeHeight(i) { document.getElementById("frame-gantt-ap").style.height = parseInt(i) + "px"; }
                            </script>
                        </apex:pageBlockSection>
                    </div>
                </div>
            </div>
            <!-- END GANTT VIEW SECTION -->
            
            <div class="slds-panel slds-grid slds-grid--vertical slds-nowrap">
                <div class="slds-form--stacked">
                    <div class="slds-panel__section">
                        <h3 class="slds-text-heading--small slds-m-bottom--medium">System Information</h3>
                        <div class="slds-grid">
                            <div class="slds-size--1-of-3">
                                <div class="slds-form-element slds-hint-parent">
                                    <label class="slds-form-element__label">{!$Label.ap_CreatedBy}</label>
                                    <div class="slds-form-element__control">
                                        <span class="slds-form-element__static">
                                            <apex:outputField value="{!ActionPlan.CreatedById}" />,
                                        </span>
                                        <span class="slds-form-element__static">
                                            <apex:outputField value="{!ActionPlan.CreatedDate}" />
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div class="slds-size--1-of-3">
                                <div class="slds-form-element slds-hint-parent">
                                    <label class="slds-form-element__label">{!$Label.advpm__ap_lastmodifiedby}</label>
                                    <div class="slds-form-element__control">
                                        <span class="slds-form-element__static">
                                            <apex:outputField value="{!ActionPlan.LastModifiedById}" />,
                                        </span>
                                        <span class="slds-form-element__static">
                                            <apex:outputField value="{!ActionPlan.LastModifiedDate}" />
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div class="slds-size--1-of-3">
                                <div class="slds-form-element slds-hint-parent">
                                    <span class="slds-form-element__label"><apex:outputText value="{!$Label.advpm__ap_owner}" /></span>
                                    <div class="slds-form-element__control">
                                        <span class="slds-form-element__static"><apex:outputField value="{!actionPlan.OwnerId}" />&nbsp;[<apex:outputLink styleClass="slds-changeLink" value="/{!actionPlan.Id}/a?retURL={!$CurrentPage.URL}">{!$Label.advpm__ap_change}</apex:outputLink>]</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </apex:pageBlock>
    </apex:form>
	<script>
        	ActionPlanDetailScripts.formatFields();
       	 	ActionPlanDetailScripts.removeHover();
    </script>
	</body>
</html>
</apex:page>