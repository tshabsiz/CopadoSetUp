<apex:page applyBodyTag="false" showHeader="false" sidebar="false" standardController="Event__c" extensions="evScheduleExtension_Controller" renderAs="pdf">
    
    <head>
        <style type="text/css" media="print">
            @page {
            size: A4 portrait;
            margin: 120px 30px 150px 30px; /*top right bottom left*/
            
            @top-center {
            content: element(header);
            }
            @bottom-center {
            content: element(footer);
            }
            }
            body{
            font-family: Arial, Helvetica, Verdana, Geneva, sans-serif;
            }
            h1,h2,h3,p,table,span{
            font-family: Arial, Helvetica, Verdana, Geneva, sans-serif;
            }
            div.header {
            padding: 5px;
            margin: 0px 10px 0px 10px; /*top right bottom left*/
            position: running(header);
            }
            div.footer {
            padding: 5px;
            margin: 0px 10px 0px 10px; /*top right bottom left*/
            position: running(footer);
            }
            .pagenumber:before {
            content: counter(page);
            }
            .pagecount:before {
            content: counter(pages);
            }
            .page-break {
            page-break-after:always;
            }
            .page-break-avoid {
            page-break-after:avoid;
            }
            div.page-content {
            margin: 0px;
            }
            
            .page-content {
            font-family: Arial;
            }
            
            .ev-details {
            text-align: center;
            margin-bottom: 30px;
            }
            
            .del-acc {
                font-size: 28px;
                font-weight: bold;
                display: block;
            }
            
            .ev-name {
                font-size: 20px;
                font-weight: bold;
                margin-bottom: 20px;
                margin-top: 20px;
                display: block;
            }
            
            .host-name {
                font-size: 18px;
                display: block;
            }
            
            .ev-ven {
                font-size: 17px;
                font-weight: bold;
                margin-bottom: 0px;
                display: block;
            }
            
            .ev-date {
                font-size: 20px;
                font-weight: bold;
                margin-bottom: 20px;
                display: block;
            }
            
            .disclaimer {
                font-size: 13px;
                font-weight: bold;
                font-style: italic;
            }
            
            .time {
                font-size: 13px;
                font-weight: bold;
            }
            
            .ds-table {
                font-size:14px;
            }
            
            .ds-table td, .ds-table th {
            padding: 10px 5px;
            }
            
            .ds-table th {
            background-color: #ec2027;
            color: white;
            }
            
            tr.border-btm td {
                border-bottom: 1pt solid black;
            }
            
            .bg-grey {
                background-color: #d6d6d6 !important;
            }
            
        </style>
    </head>
    
    <div class="header">
        <apex:image value="{!agendaConfig.Agenda_Logo__c}" />
        <!--
        <apex:image value="data:image/png;base64,{!cv2}"/>
        -->
    </div>
    
    <div class="footer">
        <p class="disclaimer">Please Note: This schedule is subject to change. All participants must check in every day at the One-on-One Desk.</p>
        <p class="time">
            <apex:outputText value="{0,date,EEEE MMMM d, yyyy}">
                <apex:param value="{!TODAY()}" />
            </apex:outputText>
        </p>
    </div> 
    
    <div class="page-content">
        
        <div class="ev-details">
            <span class="del-acc">{!acc.Name}</span>
            <apex:repeat var="host" value="{!sessionSpeakerSet}">
                <span class="host-name">{!host}</span>
            </apex:repeat>
            <span class="ev-name">{!Event__c.Name}</span>
            <span class="ev-ven">{!Event__c.Venue__r.Name} - {!Event__c.Venue__r.Address__c}</span>
            <span class="ev-date">                           
                <apex:outputText value="{0,date,EEEE MMMM d, yyyy}">
                    <apex:param value="{!Event__c.Start_Date__c}" />
                </apex:outputText>
                &nbsp;-&nbsp;
                <apex:outputText value="{0,date,EEEE MMMM d, yyyy}">
                    <apex:param value="{!Event__c.End_Date__c}" />
                </apex:outputText>
            </span>
        </div>
        
        <table class="ds-table" cellspacing="0">
            <tr>
                <th width="100">Time</th>
                <th width="130">Location</th>
                <th width="120">Meeting Type</th>
                <th width="150">Organization</th>
                <th width="160">Attendee</th>
            </tr>
            <apex:repeat var="day" value="{!groups}">
                <tr class="border-btm">
                    <td colspan="5">
                        <strong>{!day.GroupedVal}</strong>
                    </td>
                </tr>
                <apex:repeat var="session" value="{!day.sessions}">
                    <apex:outputPanel layout="none" rendered="{!session.Scheduled_Delegates_Confirmed__c  == 0}">
                        <tr class="border-btm">
                            <td class="bg-grey">{!session.Start_Time_Text__c} - {!session.End_Time_Text__c}</td>
                            <td class="bg-grey">TBD</td>
                            <td class="bg-grey"></td>
                            <td class="bg-grey"></td>
                            <td class="bg-grey"></td>
                        </tr>
                    </apex:outputPanel>
                    <apex:variable value="{!1}" var="rowNum"/>
                    <apex:repeat var="sb" value="{!session.Session_Bookings__r}">
                        <tr class="{!IF((rowNum == (session.Scheduled_Delegates_Confirmed__c + session.Session_Bookings_Walk_Ins__c) && sb.Session__r.Type__c == 'Group') || sb.Session__r.Type__c == '1 on 1', 'border-btm', '')}">
                            <td>
                                <apex:outputText rendered="{!IF((rowNum == 1 && sb.Session__r.Type__c == 'Group') || sb.Session__r.Type__c == '1 on 1', 'true', 'false')}">
                                    {!sb.Session__r.Start_Time_Text__c} - {!sb.Session__r.End_Time_Text__c}
                                </apex:outputText>
                            </td>
                            <td>
                                <apex:outputText rendered="{!IF((rowNum == 1 && sb.Session__r.Type__c == 'Group') || sb.Session__r.Type__c == '1 on 1', 'true', 'false')}">
                                    {!sb.Session__r.Room__r.Name}
                                </apex:outputText>
                            </td>
                            <td>
                                <apex:outputText rendered="{!IF((rowNum == 1 && sb.Session__r.Type__c == 'Group') || sb.Session__r.Type__c == '1 on 1', 'true', 'false')}">
                                    {!sb.Session__r.Type__c}
                                </apex:outputText>
                            </td>
                            <td>{!sb.Delegate__r.Company__c}</td>
                            <td>{!sb.Delegate__r.Full_Name__c}</td>
                        </tr>
                        <apex:variable var="rowNum" value="{!rowNum + 1}"/>
                    </apex:repeat>
                </apex:repeat>
            </apex:repeat>
        </table>
        
    </div>
    
    <div style="page-break-before:always;">
        <apex:outputText escape="false" value="{!agendaConfig.Disclaimer__c}"></apex:outputText>
    </div>
    
</apex:page>